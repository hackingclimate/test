function draw(){var E,G,S,z={top:40,right:30,bottom:30,left:30},B=300-z.top-z.bottom,F=400-z.left-z.right,e=1500,a=d3.select("#greenland-sea-ice"),r=d3.select(".container-1"),n=(d3.graphScroll().container(d3.select(".container-1")).sections(d3.selectAll(".container-1  #sections > div")).on("active",function(t){0==t&&(a.style("transform","scale(2)"),a.style("opacity","1"),r.style("background","black")),1==t&&(a.style("transform","scale(2.7)"),a.style("opacity","1"),r.style("background","black")),2==t&&(a.style("transform","scale(2.7) translateY(-8em)"),console.log("intro-image i == 2"),a.style("opacity","1"),r.style("background","black")),3==t&&(a.style("opacity","1"),r.style("background","black")),4==t&&(a.style("opacity","1"),r.style("background","black"))}),0),o=d3.select("#g-lorentz"),s=(d3.graphScroll().container(d3.select(".container-3")).sections(d3.selectAll(".container-3 #sections > div")).on("active",function(t){1==t&&(a.style("opacity","0"),r.style("background","white"),0===n&&(lorenz(),n++),o.transition().duration(e).attr("opacity",1)),2==t&&(a.style("opacity","0"),r.style("background","white"),o.transition().duration(e).attr("opacity",1)),3==t&&o.transition().duration(e).attr("opacity",1),4==t&&o.transition().duration(e).attr("opacity",1),5==t&&o.transition().duration(e).attr("opacity",1),6==t&&o.transition().duration(1e3).attr("opacity",0)}),d3.select("#svg-ppm")),i=(d3.graphScroll().container(d3.select(".container-2")).sections(d3.selectAll(".container-2 #sections > div")).on("active",function(t){var a=d3.select("#zero"),e=d3.select("#minus3"),r=d3.select("#minus6");console.log(t+"th section active"),0==t&&s.select(".rect").transition().duration(500).attr("x",0),1==t&&(s.select(".rect").transition().duration(750).attr("x",F+40),a.transition().delay(0).duration(750).style("opacity",1),e.transition().duration(500).style("opacity",0),r.transition().duration(500).style("opacity",0)),2==t&&(a.transition().duration(500).style("opacity",.2),e.transition().delay(0).duration(500).style("opacity",1),r.transition().duration(500).style("opacity",0)),3==t&&(a.transition().duration(500).style("opacity",.2),e.transition().duration(500).style("opacity",.2),r.transition().delay(0).duration(500).style("opacity",1))}),d3.dsvFormat("  ")),W=0,l="https://hackingclimate.github.io/paris";function q(t,a,e){var r=d3.scaleLinear().range([0,F]),n=d3.scaleLinear().range([B,0]),o=d3.line().x(function(t){return r(t.Year)}).y(function(t){return n(t.actual)}),s=d3.select("#"+a).append("g").attr("transform","translate("+z.left+","+z.top+")");if(t.forEach(function(t){t.Year=+t.Year,t.actual=+t.actual}),1===e){r.domain([1850,2020]),n.domain([150,410]);var i=[{note:{label:"",wrap:400},x:175,y:-40,dy:0,dx:0,color:"black"},{note:{label:"We crossed 350ppm in 1988. We need to get back here",title:"",wrap:150},x:130,y:37,dy:0,dx:0,color:"rgba(11,218,81);"},{note:{label:"We are now at 410ppm",title:"",wrap:50},x:330,y:15,dy:150,dx:0,color:"grey"}].map(function(t){return t})}else r.domain([1850,2100]),n.domain([150,600]);var l=d3.annotation().type(d3.annotationLabel).annotations(i);s.append("path").data([t]).attr("class","line3").attr("d",o),1===e&&(s.append("g").attr("class","x-axis").attr("transform","translate(0,"+B+")").call(d3.axisBottom(r).tickFormat(d3.format("d"))),s.append("g").call(d3.axisLeft(n).ticks(5)),s.append("text").attr("class","y-axis").attr("transform","rotate(-90)").attr("y",15).attr("x",5-B).style("text-anchor","start").text("Parts Per Million (ppm)"),s.append("g").attr("class","annotation-group").call(l),s.append("line").attr("x1",10).attr("x2",325).attr("y1",53).attr("y2",53).attr("stroke-width","1px").attr("stroke","rgb(11,218,81)").attr("stroke-dasharray","5,5"),s.append("g").attr("class","rectg").append("rect").attr("class","rect").attr("x",0).attr("y",0).attr("width",F+20).attr("height",B).style("fill","white").style("stroke","none"))}d3.request(l+"/Data/csv/fig2a.txt").mimeType("text/plain").response(function(t){return i.parse(t.responseText)}).get(function(t){console.log("custom-delimited data:"),console.log(t[1]),t,function L(Y){d3.request(l+"/Data/csv/"+Y+".txt").mimeType("text/plain").response(function(t){return i.parse(t.responseText)}).get(function(t){var a,e,r,n,o,s,i,l,c,d,p,y,u,x,m,g,f,h,b,v,k,w,T,A;console.log(Y),console.log(t[1]),0===W?(E=t,W++,L("fig10-wo-extract")):1===W?(G=t,W++,L("holocene-fig3")):2===W?(S=t,W++,L("fig10-w-extract")):3===W&&(t,W++,function(){var t=d3.select("#svg-carbon-removal-blocks").append("g").attr("transform","translate(0,55)"),a=t.append("g").attr("id","carbon-removal-constant-emissions").attr("transform","translate(0,0)"),e=t.append("g").attr("id","carbon-removal-three-percent-emissions").attr("transform","translate(140,0)"),r=t.append("g").attr("id","carbon-removal-six-percent-emissions").attr("transform","translate(280,0)"),n=t.append("g").attr("id","carbon-removal-yearly-emissions").attr("transform","translate(280,112)"),o=t.append("g").attr("transform","translate(0,0)"),s=t.append("g").attr("transform","translate(0,0)"),i=t.append("g").attr("transform","translate(140,0)"),l=t.append("g").attr("transform","translate(280,0)"),c=t.append("g").attr("transform","translate(280,144)"),d=t.append("g").attr("transform","translate(196,0)"),p=t.append("g").attr("transform","translate(0,0)"),y=t.append("g").attr("transform","translate(140,0)"),u=t.append("g").attr("transform","translate(280,0)"),x=t.append("g").attr("transform","translate(280,144)");o.append("text").attr("class","carbon-removal-units-description").attr("y",201).attr("x",0).style("text-anchor","start").text("1 Square = 10 billion tons (GT)"),s.append("text").attr("class","carbon-removal-text").attr("y",34).attr("x",52.5).style("text-anchor","middle").text("fall 0% a year"),p.append("text").attr("class","carbon-removal-text-gt").attr("y",169).attr("x",0).style("text-anchor","start").text("2550 GT"),i.append("text").attr("class","carbon-removal-text").attr("y",34).attr("x",52.5).style("text-anchor","middle").text("fall 3% a year"),y.append("text").attr("class","carbon-removal-text-gt").attr("y",93).attr("x",0).style("text-anchor","start").text("870 GT"),l.append("text").attr("class","carbon-removal-text").attr("y",34).attr("x",52.5).style("text-anchor","middle").text("fall 6% a year"),u.append("text").attr("class","carbon-removal-text-gt").attr("y",79).attr("x",0).style("text-anchor","start").text("560 GT"),c.append("text").attr("class","carbon-removal-text-small").attr("y",0).attr("x",0).style("text-anchor","start").text("Yearly Emissions"),x.append("text").attr("class","carbon-removal-text-gt-black").attr("y",26).attr("x",0).style("text-anchor","start").text("40 GT"),d.append("text").attr("class","carbon-removal-title").attr("y",0).attr("x",0).style("text-anchor","middle").text("CO2 Removal Under Different Emissions Scenarios (from 2021)");for(var m="rgb(11,218,81)",g=0,f=0,h=0;h<15;h++)for(var b=0;b<17;b++)a.append("rect").attr("x",7*h).attr("y",40+7*b).attr("width",5).attr("height",5).attr("fill",m);for(var h=0;h<6;h++)for(var b=0;b<15;b++)g<87&&e.append("rect").attr("x",7*b).attr("y",40+7*h).attr("width",5).attr("height",5).attr("fill",m),g++;for(var h=0;h<4;h++)for(var b=0;b<15;b++)f<56&&r.append("rect").attr("x",7*b).attr("y",40+7*h).attr("width",5).attr("height",5).attr("fill",m),f++;for(var h=0;h<4;h++)for(var b=0;b<1;b++)n.append("rect").attr("x",7*h).attr("y",40+7*b).attr("width",5).attr("height",5).attr("fill","black")}(),q(E,"svg-historical-emissions",1),l=S,c=d3.scaleLinear().range([0,F]),d=d3.scaleLinear().range([B,0]),p=d3.line().x(function(t){return c(t.Age)}).y(function(t){return d(t.Temp)}),y=d3.line().x(function(t){return c(t.Age)}).y(function(t){return t.Temp<.75?d(t.Temp+.25):d(1)}),u=d3.line().x(function(t){return c(t.Age)}).y(function(t){return t.Temp<.8?d(t.Temp+.2):d(1)}),x=d3.line().x(function(t){return c(t.Age)}).y(function(t){return t.Temp<.85?d(t.Temp+.15):d(1)}),m=d3.line().x(function(t){return c(t.Age)}).y(function(t){return t.Temp<.9?d(t.Temp+.1):d(1)}),g=d3.line().x(function(t){return c(t.Age)}).y(function(t){return t.Temp<.95?d(t.Temp+.05):d(1)}),f=d3.line().x(function(t){return c(t.Age)}).y(function(t){return d(t.Temp-.05)}),h=d3.line().x(function(t){return c(t.Age)}).y(function(t){return d(t.Temp-.1)}),b=d3.line().x(function(t){return c(t.Age)}).y(function(t){return d(t.Temp-.15)}),v=d3.line().x(function(t){return c(t.Age)}).y(function(t){return d(t.Temp-.2)}),k=d3.line().x(function(t){return c(t.Age)}).y(function(t){return d(t.Temp-.25)}),w=[{note:{label:"",wrap:400},x:175,y:-40,dy:0,dx:0,color:"black"},{note:{label:"The Paris Agreement aims to keep us here",title:"",wrap:300},x:160,y:15,dy:0,dx:0,color:"rgb(11,218,81)"},{note:{label:"350ppm keeps us here",title:"",wrap:300},x:160,y:65,dy:0,dx:0,color:"rgb(85,172,238)"},{note:{label:"Industrial Revolution",title:"",wrap:120},x:338,y:150,dy:-40,dx:-60,color:"grey"},{note:{label:"This band represents uncertainty. We can be 95% sure that the true average temperature lies within it.",title:"",wrap:120},x:140,y:130,dy:20,dx:0,color:"grey"}].map(function(t){return t}),T=d3.annotation().type(d3.annotationLabel).annotations(w),A=d3.select("#svg-holocene-temp").append("g").attr("transform","translate("+z.left+","+z.top+")"),l.forEach(function(t){t.Age=-t.Age,t.Temp=+t.Temp}),c.domain([-12050,0]),d.domain([-1.2,2.2]),A.append("line").attr("x1",10).attr("x2",340).attr("y1",82).attr("y2",82).attr("stroke-width","1px").attr("stroke","rgb(85,172,238)").attr("stroke-dasharray","5,5"),A.append("line").attr("x1",10).attr("x2",340).attr("y1",48).attr("y2",48).attr("stroke-width","1px").attr("stroke","rgb(11,218,81)").attr("stroke-dasharray","5,5"),A.append("line").attr("x1",10).attr("x2",340).attr("y1",15).attr("y2",15).attr("stroke-width","1px").attr("stroke","rgb(11,218,81)").attr("stroke-dasharray","5,5"),A.append("path").data([l]).attr("class","line3").attr("d",p),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",y),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",u),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",x),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",m),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",g),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",f),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",h),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",b),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",v),A.append("path").data([l]).attr("class","uncertainty-line").attr("d",k),A.append("g").attr("class","x-axis").attr("transform","translate(0,"+B+")").call(d3.axisBottom(c).ticks(5).tickFormat(d3.format("d"))),A.append("g").call(d3.axisLeft(d).ticks(5)),A.append("text").attr("class","y-axis").attr("transform","rotate(-90)").attr("y",15).attr("x",-14).style("text-anchor","end").text("Â°C (relative to 1880-1920)"),A.append("text").attr("class","y-axis").attr("y",B-10).attr("x",F).style("text-anchor","end").text("Age (years before present)"),A.append("g").attr("class","annotation-group").call(T),A.append("g").attr("class","rectg").append("rect").attr("class","rect").attr("x",0).attr("y",0).attr("width",F+10).attr("height",B).style("fill","white").style("stroke","none"),q(E,"svg-ppm",0),a=G,e=d3.scaleLinear().range([0,F]),r=d3.scaleLinear().range([B,0]),n=d3.line().x(function(t){return e(t.Year)}).y(function(t){return r(t.cons)}),o=d3.line().x(function(t){return e(t.Year)}).y(function(t){return r(t.minus3)}),s=d3.line().x(function(t){return e(t.Year)}).y(function(t){return r(t.minus6)}),i=d3.select("#svg-ppm").append("g").attr("transform","translate("+z.left+","+z.top+")"),a.forEach(function(t){t.Year=+t.Year,t.cons=+t.cons,t.minus3=+t.minus3,t.minus6=+t.minus6}),e.domain([1850,2100]),r.domain([150,600]),i.append("path").data([a]).attr("id","zero").attr("class","line2").attr("stroke","rgb(255, 239, 0)").attr("d",n),i.append("path").data([a]).attr("id","minus3").attr("class","line2").attr("d",o).attr("stroke","#55acee").style("opacity",0),i.append("path").data([a]).attr("id","minus6").attr("class","line2").attr("stroke","rgb(11,218,81)").attr("d",s).style("opacity",0),i.append("g").attr("class","x-axis").attr("transform","translate(0,"+B+")").call(d3.axisBottom(e).ticks(5).tickFormat(d3.format("d"))),i.append("g").call(d3.axisLeft(r).ticks(5)),i.append("g").attr("class","rectg").append("rect").attr("class","rect").attr("id","ppm-rect").attr("x",0).attr("y",0).attr("width",F).attr("height",B).style("fill","white").style("stroke","none"))})}("fig10-actual")}),appear({init:function(){console.log("dom is ready")},elements:function(){return document.getElementsByClassName("svg")},appear:function(t){console.log("visible",t.getAttribute("id"));var a=t.getAttribute("id");d3.select("#"+a).select(".rect").transition().duration(e).attr("x",F+40)},disappear:function(t){console.log("no longer visible",t);var a=t.getAttribute("id");d3.select("#"+a).select(".rect").transition().duration(1e3).attr("x",0)},bounds:-100,reappear:!0}),drawNotes()}